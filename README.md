# Sungshin_3F
당신의 하루를 책임지는 공간, Sungshin_3F

코로나로 인해 학우들이 한정적인 활동을 할 수밖에 없는 배경에서 20, 21학번 학생들은 줌(zoom) 수업으로 학교 주변에서 체험할 수 있는 활동을 하지 못하는 상황이고, 이후 학번 학생들은 실내, 특히 집에서만 할 수 있는 활동을 찾는 상황에 놓이게 되었습니다. 

이에 주목하여 Sungshin_3F 앱은 학우들에게 코로나 상황에서 학교 주변 외부 활동이 가능한 공간과 외부 활동 시 필요한 요소들, 실내에서 할 수 있는 재미난 액티비티 들을 추천해주는 '추천 시스템'을 개발하고자 했습니다. **성신여대 학우들을 위한 Fashion, Food, Fun을 추천**한다는 점에서 착안하여 Sungshin_3F라고 이름붙였습니다.

## 📌 앱의 구성
|***|Fashin|Food|Fun|
|:---:|:---:|:---:|:---:|
|**Inside(실내)**|유저 패션 취향에 따른 브랜드|유튜브 요리 영상|웹툰|
|**Outside(야외)**|날씨에 맞는 스타일|캠퍼스 맛집|연극|

## 📌 경쟁 앱과의 차별점
Sungshin_3F은 다른 앱과 차별점을 두기 위해 **캠퍼스 맛집과 연극**부분에 대한 설문조사를 진행하였습니다.

총 50명의 학우들에게 구글 설문지를 돌린 결과,

기존 맛집 앱(배달의 민족, 요기요 등)에서는 **광고성이 느껴지지 않는 진실된 후기**가 신뢰도를 낮추는 가장 큰 원인이 되었고, 이를 보완하기 위해 **상황별로 적절한 맛집 추천, 재방문의사** 기능이 필요하다는 의견을 받을 수 있었습니다.

이에 따라 앱에 **재방문의사와 상황별 맛집**을 추천 시스템에 반영할 수 있었습니다.

다음으로 연극 추천 부분에서는 연극 정보를 한 플랫폼에서 보기 어렵다는, 예매 방법에 대한 어려움이 가장 큰 비중을 차지했습니다. 따라서 연극 정보를 한눈에 볼 수 있도록 시스템을 구성했습니다.

## 📌 기능
**<Outside(외부)>**


**1. 연극**
   * 자세한 위치 정보 (링크 첨부) 및 최저가 플랫폼 제시
   * 연극 개인화 추천
   * 별점·후기 댓글글 

**2. 캠퍼스 맛집(성신여대, 대학로)**
   * 식당 근처 캠퍼스(수정캠/운정캠) 및 대학로 위치에 따른 맛집 구분 
   * 재방문 의사

**3. 기상 상황에 맞는 스타일**
   * API를 통한 실시간 서울 날씨 확인
   * 체감 온도에 맞는 스타일 사진으로 제시

     
**<Inside(내부)>**

**1. 웹툰**
   * 장르별 네이버 웹툰과 신작 제시
   * 질문을 통한 취향 추천

**2. 요리 영상**
   * YouTube API를 통해 4가지 테마의 요리 영상을 제공받음.
   * 앱에서 바로 영상 재생 가능

**3. 패션**
   * 질문을 통해 이용자의 평소 패션 취향을 알아보고 브랜드와 스타일을 사진으로 제시

## 📌 기술
![Static Badge](https://img.shields.io/badge/Firebase-%23FF0000)
![Static Badge](https://img.shields.io/badge/API-%23FFA500)
![Static Badge](https://img.shields.io/badge/Crawling(Scrapping)-%23006400)
![Static Badge](https://img.shields.io/badge/Recommendation_Algorithm-%230000FF)
---


### *1. Firebase*

구글에서 개발에 필요한 백엔드에 해당하는 구성 요소(인증, 데이터베이스 연결, 푸시 알람, 스토리지, API 등)를 제공하는 모바일 애플리케이션 플랫폼

**Outside-Fun** : **데이터베이스 기능을 활용하여 연극 데이터를 가져오는 부분**

**1) 연극 추천**

* 연극 공공데이터 API의 JSON 문서를 활용하여 연극 정보를 가져와 리스트 형태로 데이터베이스를 구성했습니다.
* Firebase와의 연동을 위해 연극 데이터베이스를 생성하고, 연극 데이터를 호출하기 위해 대용량 데이터를 순회하며 데이터를 생성하는 generator를 작성했습니다.
* Firebase와의 연결을 통해 연극 데이터베이스를 가져오기 위해 get() 함수를 사용하여 연극 객체와 해당 문서의 ID를 가져오는 방식을 선택했습니다.
* 데이터를 리사이클러뷰와 뷰홀더를 사용하여 표시하기 위해 중간 객체 역할을 하는 어댑터를 활용했습니다.
* 데이터를 리스트 형태로 가져오되, 새로 추가된 데이터는 리스트에 삽입하기 위해 map() 함수를 사용하여 새로운 배열을 생성하는 방식으로 코드를 구성했습니다.

**2) 후기 댓글**

* Firebase에 add()를 활용하여 유저 아이디를 등록합니다.
* UserRepository에서 사용자 ID를 키로하여 사용자를 저장하고, 새로운 사용자를 추가합니다.
* 작업의 단위인 트랜잭션을 사용하여 별점을 업데이트하고, 입력된 리뷰를 등록합니다.
* 리뷰를 삭제할 때에도 위와 같은 방법으로 별점을 재조정합니다.
* User와 ReviewRepository에서 각각의 요소를 가져와 (사용자, 리뷰)를 동시에 등록합니다.
* Firebase에서 사용자 ID를 통해 연극, 리뷰, 사용자 Repository에서 관련 요소를 모두 가져올 수 있도록 구성되었습니다.


### *2. API*

**Outside-Fashion** : **날씨 API** / **Inside-Food** : **YouTube Data API**

**1) 날씨에 따른 패션 스타일 추천**

* 현재 날씨 정보를 알고 싶은 도시와 개인 API key값을 넣어 날씨 정보를 받아옵니다.
* JSON 문서로 받아온 서울 날씨 정보에서 현재온도, 체감온도, 최고온도, 최저온도, 습도, 날씨 ID를 변수에 저장해주었습니다.
* 체감 온도에 따른 옷 이미지와 설명을 지정해 화면에 제시했습니다.
* 날씨 ID에 따라 이미지를 바꾸어주었습니다.


**2) API를 활용한 요리 영상 재생**

* 4가지 테마 - 혼밥요리, 홈파티 요리, 집밥음식, 비건 요리의 영상을 얻기 위해 개인 API key값과 각 테마에 맞는 검색 키워드를 넣어서 영상 5개를 JSON 문서의 영상 썸네일, 제목, 비디오 코드 항목을 통해 받아왔습니다.


### *3. Crawling(Scrapping)*

**Inside-Fun** : **웹툰 추출**

* 이달의 신규 웹툰을 크롤링 하기 위해 F12의 개발자 도구를 보고 웹툰 정보가 담겨 있는 태그를 파악했습니다.
* 태그에 해당하는 정보를 추출하여 변수에 할당한 뒤 화면에 제시했습니다.

### *4. Recommendation*

**Inside-Fun : 웹툰 추천, 패션 브랜드 추천** 

**1) 유저의 선호도를 반영한 웹툰 추천**

* 유저에게 추천하고자 하는 작품 15개를 선정하여 변수에 저장한 후, 이를 나타내는 웹툰 객체의 인스턴스를 생성하였습니다.
* 사용자의 취향을 반영하기 위해 5개의 질문을 받았고, 각 질문에 대한 결과 값은 Boolean형으로 받았습니다.
* 1번 질문이 true인 경우 1을 할당했고, false인 경우 0을 할당했습니다. 나머지 질문은 true일 시 2, false일 시 0.5를 할당했습니다. 여기서 1번 질문과 4번 질문을 그룹지어 (T, T=2), (T, F=1.5), (F,F=0.5), (F, T=0)으로 값을 도출했습니다. 결과 값이 0이거나 1.5인 경우, 2거나 0.5인 경우로 나누었습니다.
* 위의 코드 아래에서 2, 3, 5는 true인 경우 2를 할당하여 곱했고, false인 경우 0.5를 할당하여 더했습니다. 예를 들어 2번 질문 true, 3번 질문 true, 5번 질문 false라면 2X2+0.5가 되는 식이었습니다. 
* 이 결과에 따라 4.5이상인 경우, 2.0이상 4.5미만인 경우, 나머지 경우 세 가지로 나누어 각 항목에서 하나씩 웹툰을 추천해 총 3개의 웹툰을 추천받을 수 있도록 했습니다.
* 최종적으로 사용자의 응답에 대해 작품의 중복을 막기 위해 웹툰 3개를 랜덤으로 도출하였습니다.

**2) 패션 브랜드 추천**
* 질문 개수와 결과 개수만큼 Kt 파일을 만든 후 화살표 순서에 맞게 화면에 인텐트 해주어 사용자에게 알맞은 패션 브랜드를 화면에 제시했습니다.


## 📌 [팀] 담당 부분 
* Inside/Outside-Fun 부분 담당
* Firebase 기술, 추천 알고리즘 
* 전반적인 UI
